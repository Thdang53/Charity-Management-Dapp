{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ConnectButton,useCurrentAccount,useSuiClient,useSignAndExecuteTransaction}from'@mysten/dapp-kit';import{CampaignCard}from'./components/CampaignCard';import{CreateCampaignForm}from'./components/CreateCampaignForm';import{DonateModal}from'./components/DonateModal';import{fetchAllCampaigns,buildWithdrawTx}from'./utils/campaignManager';import{getExplorerUrl}from'./config/constants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const currentAccount=useCurrentAccount();const suiClient=useSuiClient();const{mutate:signAndExecute}=useSignAndExecuteTransaction();const[campaigns,setCampaigns]=useState([]);const[loading,setLoading]=useState(true);const[showCreateForm,setShowCreateForm]=useState(false);const[selectedCampaign,setSelectedCampaign]=useState(null);const[filter,setFilter]=useState('all');// Load campaigns on mount and when account changes\nuseEffect(()=>{loadCampaigns();},[currentAccount]);const loadCampaigns=async()=>{setLoading(true);try{const data=await fetchAllCampaigns(suiClient);setCampaigns(data);}catch(error){console.error('Failed to load campaigns:',error);}finally{setLoading(false);}};const handleWithdraw=async campaign=>{if(!window.confirm(\"Withdraw \".concat(campaign.raised.toFixed(2),\" SUI to beneficiary?\"))){return;}try{const tx=buildWithdrawTx(campaign.id);signAndExecute({transaction:tx},{onSuccess:result=>{alert(\"\\u2705 Withdrawal successful! View on explorer: \".concat(getExplorerUrl('tx',result.digest)));loadCampaigns();// Refresh\n},onError:error=>{alert(\"\\u274C Withdrawal failed: \".concat(error.message));}});}catch(error){alert(\"\\u274C Error: \".concat(error.message));}};// Filter campaigns\nconst filteredCampaigns=campaigns.filter(c=>{if(filter==='active')return Date.now()<c.deadline;if(filter==='expired')return Date.now()>=c.deadline;return true;});const stats={total:campaigns.length,active:campaigns.filter(c=>Date.now()<c.deadline).length,totalRaised:campaigns.reduce((sum,c)=>sum+c.raised,0)};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',backgroundColor:'#f5f5f5'},children:[/*#__PURE__*/_jsx(\"nav\",{style:{backgroundColor:'#fff',boxShadow:'0 2px 8px rgba(0,0,0,0.1)',padding:'16px 20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1200px',margin:'0 auto',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px'},children:\"\\uD83E\\uDD1D\"}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'24px',fontWeight:'700',background:'linear-gradient(135deg, #2196f3, #00bcd4)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"Charity DApp\"})]}),/*#__PURE__*/_jsx(ConnectButton,{})]})}),/*#__PURE__*/_jsxs(\"main\",{style:{maxWidth:'1200px',margin:'0 auto',padding:'40px 20px'},children:[!showCreateForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'48px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'42px',fontWeight:'700',color:'#212121',marginBottom:'16px'},children:\"Transparent Charity on Sui Blockchain\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'18px',color:'#616161',marginBottom:'32px',maxWidth:'600px',margin:'0 auto 32px'},children:\"Create campaigns, donate with confidence, and track every transaction on-chain\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateForm(true),disabled:!currentAccount,style:{padding:'16px 32px',border:'none',borderRadius:'12px',fontSize:'18px',fontWeight:'600',cursor:currentAccount?'pointer':'not-allowed',backgroundColor:currentAccount?'#2196f3':'#e0e0e0',color:'#fff',boxShadow:currentAccount?'0 4px 16px rgba(33, 150, 243, 0.3)':'none',transition:'all 0.2s'},onMouseEnter:e=>{if(currentAccount){e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 6px 20px rgba(33, 150, 243, 0.4)';}},onMouseLeave:e=>{if(currentAccount){e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 4px 16px rgba(33, 150, 243, 0.3)';}},children:\"\\u2728 Create Campaign\"}),!currentAccount&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'12px',fontSize:'14px',color:'#f44336'},children:\"\\u26A0\\uFE0F Please connect your wallet to create a campaign\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'20px',marginBottom:'40px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fff',padding:'24px',borderRadius:'12px',textAlign:'center',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',fontWeight:'700',color:'#2196f3'},children:stats.total}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#757575',marginTop:'4px'},children:\"Total Campaigns\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fff',padding:'24px',borderRadius:'12px',textAlign:'center',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',fontWeight:'700',color:'#4caf50'},children:stats.active}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#757575',marginTop:'4px'},children:\"Active Campaigns\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fff',padding:'24px',borderRadius:'12px',textAlign:'center',boxShadow:'0 2px 8px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'32px',fontWeight:'700',color:'#ff9800'},children:[stats.totalRaised.toFixed(2),\" SUI\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#757575',marginTop:'4px'},children:\"Total Raised\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'12px',marginBottom:'24px',borderBottom:'2px solid #e0e0e0',paddingBottom:'12px'},children:['all','active','expired'].map(f=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilter(f),style:{padding:'8px 16px',border:'none',backgroundColor:'transparent',fontSize:'15px',fontWeight:filter===f?'600':'400',color:filter===f?'#2196f3':'#757575',cursor:'pointer',borderBottom:filter===f?'3px solid #2196f3':'none',marginBottom:filter===f?'-14px':'0',transition:'all 0.2s'},children:[f.charAt(0).toUpperCase()+f.slice(1),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'6px',fontSize:'13px'},children:[\"(\",f==='all'?stats.total:f==='active'?stats.active:stats.total-stats.active,\")\"]})]},f))}),loading?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',color:'#757575'},children:\"Loading campaigns...\"})]}):filteredCampaigns.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'60px 20px',backgroundColor:'#fff',borderRadius:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'64px',marginBottom:'16px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#616161',marginBottom:'8px'},children:\"No campaigns found\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#9e9e9e'},children:filter==='all'?'Be the first to create one!':\"No \".concat(filter,\" campaigns\")})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(320px, 1fr))',gap:'24px'},children:filteredCampaigns.map(campaign=>/*#__PURE__*/_jsx(CampaignCard,{campaign:campaign,onDonate:setSelectedCampaign,onWithdraw:handleWithdraw,currentAddress:currentAccount===null||currentAccount===void 0?void 0:currentAccount.address},campaign.id))})]}),showCreateForm&&/*#__PURE__*/_jsx(CreateCampaignForm,{onSuccess:newCampaign=>{// ðŸŽ¯ THÃŠM CAMPAIGN Má»šI VÃ€O Äáº¦U DANH SÃCH NGAY Láº¬P Tá»¨C\nsetCampaigns([newCampaign,...campaigns]);setShowCreateForm(false);// Optional: Load láº¡i tá»« blockchain sau 3 giÃ¢y Ä‘á»ƒ cáº­p nháº­t object ID tháº­t\nsetTimeout(()=>{loadCampaigns();},3000);},onCancel:()=>setShowCreateForm(false)})]}),selectedCampaign&&/*#__PURE__*/_jsx(DonateModal,{campaign:selectedCampaign,onClose:()=>setSelectedCampaign(null),onSuccess:loadCampaigns}),/*#__PURE__*/_jsxs(\"footer\",{style:{textAlign:'center',padding:'32px 20px',color:'#757575',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Built on Sui Blockchain \\uD83D\\uDE80\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px'},children:[/*#__PURE__*/_jsx(\"a\",{href:\"https://docs.sui.io\",target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#2196f3',textDecoration:'none',marginRight:'16px'},children:\"Docs\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://suiscan.xyz/testnet\",target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#2196f3',textDecoration:'none'},children:\"Explorer\"})]})]})]});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}