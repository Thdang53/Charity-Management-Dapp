{"ast":null,"code":"import _objectSpread from \"C:/Users/DMC/OneDrive/Documents/SUIMOVE/charity-dapp/charity-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar __typeError = msg => {\n  throw TypeError(msg);\n};\nvar __accessCheck = (obj, member, msg) => member.has(obj) || __typeError(\"Cannot \" + msg);\nvar __privateGet = (obj, member, getter) => (__accessCheck(obj, member, \"read from private field\"), getter ? getter.call(obj) : member.get(obj));\nvar __privateAdd = (obj, member, value) => member.has(obj) ? __typeError(\"Cannot add the same private member more than once\") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\nvar __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, \"write to private field\"), setter ? setter.call(obj, value) : member.set(obj, value), value);\nvar __privateMethod = (obj, member, method) => (__accessCheck(obj, member, \"access private method\"), method);\nvar _requestId, _options, _websocketClient, _SuiHTTPTransport_instances, getWebsocketClient_fn;\nimport { PACKAGE_VERSION, TARGETED_RPC_VERSION } from \"../version.js\";\nimport { JsonRpcError, SuiHTTPStatusError } from \"./errors.js\";\nimport { WebsocketClient } from \"./rpc-websocket-client.js\";\nclass SuiHTTPTransport {\n  constructor(options) {\n    __privateAdd(this, _SuiHTTPTransport_instances);\n    __privateAdd(this, _requestId, 0);\n    __privateAdd(this, _options);\n    __privateAdd(this, _websocketClient);\n    __privateSet(this, _options, options);\n  }\n  fetch(input, init) {\n    var _privateGet$fetch;\n    const fetchFn = (_privateGet$fetch = __privateGet(this, _options).fetch) !== null && _privateGet$fetch !== void 0 ? _privateGet$fetch : fetch;\n    if (!fetchFn) {\n      throw new Error(\"The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.\");\n    }\n    return fetchFn(input, init);\n  }\n  async request(input) {\n    var _privateGet$rpc$url, _privateGet$rpc, _privateGet$rpc2;\n    __privateSet(this, _requestId, __privateGet(this, _requestId) + 1);\n    const res = await this.fetch((_privateGet$rpc$url = (_privateGet$rpc = __privateGet(this, _options).rpc) === null || _privateGet$rpc === void 0 ? void 0 : _privateGet$rpc.url) !== null && _privateGet$rpc$url !== void 0 ? _privateGet$rpc$url : __privateGet(this, _options).url, {\n      method: \"POST\",\n      headers: _objectSpread({\n        \"Content-Type\": \"application/json\",\n        \"Client-Sdk-Type\": \"typescript\",\n        \"Client-Sdk-Version\": PACKAGE_VERSION,\n        \"Client-Target-Api-Version\": TARGETED_RPC_VERSION,\n        \"Client-Request-Method\": input.method\n      }, (_privateGet$rpc2 = __privateGet(this, _options).rpc) === null || _privateGet$rpc2 === void 0 ? void 0 : _privateGet$rpc2.headers),\n      body: JSON.stringify({\n        jsonrpc: \"2.0\",\n        id: __privateGet(this, _requestId),\n        method: input.method,\n        params: input.params\n      })\n    });\n    if (!res.ok) {\n      throw new SuiHTTPStatusError(\"Unexpected status code: \".concat(res.status), res.status, res.statusText);\n    }\n    const data = await res.json();\n    if (\"error\" in data && data.error != null) {\n      throw new JsonRpcError(data.error.message, data.error.code);\n    }\n    return data.result;\n  }\n  async subscribe(input) {\n    const unsubscribe = await __privateMethod(this, _SuiHTTPTransport_instances, getWebsocketClient_fn).call(this).subscribe(input);\n    return async () => !!(await unsubscribe());\n  }\n}\n_requestId = new WeakMap();\n_options = new WeakMap();\n_websocketClient = new WeakMap();\n_SuiHTTPTransport_instances = new WeakSet();\ngetWebsocketClient_fn = function () {\n  if (!__privateGet(this, _websocketClient)) {\n    var _privateGet$WebSocke, _privateGet$websocke, _privateGet$websocke2;\n    const WebSocketConstructor = (_privateGet$WebSocke = __privateGet(this, _options).WebSocketConstructor) !== null && _privateGet$WebSocke !== void 0 ? _privateGet$WebSocke : WebSocket;\n    if (!WebSocketConstructor) {\n      throw new Error(\"The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.\");\n    }\n    __privateSet(this, _websocketClient, new WebsocketClient((_privateGet$websocke = (_privateGet$websocke2 = __privateGet(this, _options).websocket) === null || _privateGet$websocke2 === void 0 ? void 0 : _privateGet$websocke2.url) !== null && _privateGet$websocke !== void 0 ? _privateGet$websocke : __privateGet(this, _options).url, _objectSpread({\n      WebSocketConstructor\n    }, __privateGet(this, _options).websocket)));\n  }\n  return __privateGet(this, _websocketClient);\n};\nexport { SuiHTTPTransport };\n//# sourceMappingURL=http-transport.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}